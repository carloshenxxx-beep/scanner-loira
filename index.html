<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Verifica√ß√£o de Compatibilidade‚Ñ¢</title>

<style>
  :root{
    --bg0:#05050b; --bg2:#0b1224;
    --glass:rgba(255,255,255,.08);
    --line:rgba(255,255,255,.14);
    --txt:rgba(255,255,255,.92);
    --muted:rgba(255,255,255,.62);
    --accent:#6d5cff; --good:#22c55e;
    --warn:#ffcc00; --danger:#ff3b30;
    --shadow:0 30px 100px rgba(0,0,0,.72);
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    --r:22px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:var(--sans);
    color:var(--txt);
    background:
      radial-gradient(1100px 720px at 12% 10%, rgba(109,92,255,.24), transparent 60%),
      radial-gradient(900px 700px at 85% 78%, rgba(34,197,94,.16), transparent 58%),
      radial-gradient(900px 620px at 70% 18%, rgba(255,204,0,.10), transparent 55%),
      linear-gradient(160deg, var(--bg0), var(--bg2));
    display:grid;
    place-items:center;
    padding:16px;
    overflow-x:hidden;
  }

  .fx{
    position:fixed; inset:-40px;
    pointer-events:none;
    background:
      radial-gradient(2px 2px at 12% 28%, rgba(255,255,255,.22), transparent 60%),
      radial-gradient(1px 1px at 35% 18%, rgba(255,255,255,.18), transparent 60%),
      radial-gradient(2px 2px at 65% 12%, rgba(255,255,255,.18), transparent 60%),
      radial-gradient(1px 1px at 78% 44%, rgba(255,255,255,.18), transparent 60%),
      radial-gradient(2px 2px at 22% 78%, rgba(255,255,255,.16), transparent 60%),
      radial-gradient(1px 1px at 88% 82%, rgba(255,255,255,.16), transparent 60%);
    opacity:.65;
    filter: blur(.2px);
    animation: floaty 8s ease-in-out infinite alternate;
  }
  @keyframes floaty{ from{transform:translateY(0)} to{transform:translateY(-14px)} }

  .toasts{
    position:fixed;
    left:50%;
    transform:translateX(-50%);
    bottom:14px;
    width:min(480px, calc(100% - 24px));
    display:flex;
    flex-direction:column;
    gap:10px;
    z-index:999;
    pointer-events:none;
  }
  .toast{
    border-radius:16px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(10,10,14,.86);
    backdrop-filter: blur(10px);
    box-shadow: 0 18px 50px rgba(0,0,0,.55);
    padding:12px 14px;
    animation: toastIn .18s ease both;
  }
  @keyframes toastIn{
    from{opacity:0; transform:translateY(10px); filter: blur(2px)}
    to{opacity:1; transform:none; filter: blur(0)}
  }
  .toast b{display:block;font-size:12px}
  .toast span{display:block;margin-top:3px;font-family:var(--mono);font-size:11px;color:rgba(255,255,255,.72)}
  .t-ok{border-color:rgba(34,197,94,.35)}
  .t-warn{border-color:rgba(255,204,0,.35)}
  .t-err{border-color:rgba(255,59,48,.35)}

  .app{
    width:min(480px, 100%);
    border-radius:28px;
    border:1px solid rgba(255,255,255,.16);
    background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
    box-shadow: var(--shadow);
    backdrop-filter: blur(14px);
    overflow:hidden;
    position:relative;
  }

  header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:10px;
    padding:14px 14px 12px;
    border-bottom:1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.22);
  }
  .brand{min-width:0}
  .brand b{
    display:block; font-size:13px; letter-spacing:.2px;
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  }
  .brand span{
    display:block; margin-top:3px;
    font-family:var(--mono); font-size:11px; color:var(--muted);
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  }
  .pill{
    font-family:var(--mono);
    font-size:11px;
    padding:7px 10px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.08);
    color: rgba(255,255,255,.86);
    user-select:none;
    white-space:nowrap;
  }

  main{ padding:14px }
  .screen{ display:none; animation: in .22s ease both }
  .screen.active{ display:block }
  @keyframes in{
    from{ opacity:0; transform: translateY(12px); filter: blur(3px) }
    to{ opacity:1; transform:none; filter: blur(0) }
  }

  .card{
    border:1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.20);
    border-radius: var(--r);
    padding:16px;
    position:relative;
    overflow:hidden;
  }
  .kicker{
    font-family:var(--mono);
    font-size:11px;
    color:var(--muted);
    margin-bottom:10px;
  }
  h1,h2{margin:0 0 10px}
  h1{font-size:18px; font-weight:900}
  h2{font-size:15px; font-weight:900}
  p{margin:8px 0; color:rgba(255,255,255,.86); line-height:1.55}
  .muted{color:var(--muted)}
  .small{font-size:12px; color:var(--muted)}

  .btns{display:flex; gap:10px; margin-top:12px}
  button{
    width:100%;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.09);
    color: rgba(255,255,255,.94);
    font-weight:900;
    border-radius: 16px;
    padding:12px 14px;
    cursor:pointer;
    transition: transform .08s ease, filter .15s ease, background .15s ease;
  }
  button:active{ transform: translateY(1px) }
  button:hover{ filter: brightness(1.07) }
  .primary{
    background: linear-gradient(180deg, rgba(109,92,255,.95), rgba(89,70,230,.95));
    border-color: rgba(109,92,255,.50);
    box-shadow: 0 16px 40px rgba(109,92,255,.18);
  }
  .good{
    background: linear-gradient(180deg, rgba(34,197,94,.85), rgba(22,163,74,.85));
    border-color: rgba(34,197,94,.45);
    box-shadow: 0 16px 40px rgba(34,197,94,.14);
  }
  .ghost{ background: rgba(255,255,255,.06) }

  label{
    display:flex;
    justify-content:space-between;
    font-size:12px;
    color: var(--muted);
    margin-top:10px;
  }
  input, select{
    width:100%;
    margin-top:8px;
    padding:12px 12px;
    border-radius: 14px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.22);
    color: var(--txt);
    outline:none;
    font-size:14px;
  }
  input::placeholder{ color: rgba(255,255,255,.35) }

  .progress{
    height: 12px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    overflow:hidden;
    margin-top:12px;
  }
  .bar{
    height:100%;
    width:0%;
    background: linear-gradient(90deg, rgba(34,197,94,.95), rgba(109,92,255,.95));
    transition: width .35s ease;
  }

  .terminal{
    margin-top:12px;
    border-radius:18px;
    border:1px solid rgba(255,255,255,.12);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.14));
    padding:12px;
    font-family:var(--mono);
    font-size:12px;
    line-height:1.42;
    min-height:150px;
    white-space: pre-wrap;
    position:relative;
    overflow:hidden;
  }
  .scanline{
    position:absolute; left:0; right:0; height:2px;
    background: rgba(255,204,0,.90);
    box-shadow: 0 0 18px rgba(255,204,0,.30);
    top:-3px;
    animation: scan 1.2s linear infinite;
    opacity:.9;
  }
  @keyframes scan{ 0%{transform:translateY(0)} 100%{transform:translateY(270px)} }
  .ok{color:rgba(34,197,94,.95)}
  .err{color:rgba(255,59,48,.95)}

  .big{
    font-family:var(--mono);
    font-size:34px;
    font-weight:900;
    letter-spacing:.4px;
    margin:6px 0 2px;
  }
  .glow{
    position:absolute; inset:-40px;
    background:
      radial-gradient(420px 180px at 40% 20%, rgba(109,92,255,.18), transparent 70%),
      radial-gradient(380px 180px at 60% 80%, rgba(34,197,94,.12), transparent 70%);
    opacity:.9;
    pointer-events:none;
  }

  .scrollBox{
    margin-top:10px;
    border-radius:18px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(0,0,0,.20);
    max-height: 48vh;
    overflow:auto;
    padding:12px 12px;
  }
  .scrollBox::-webkit-scrollbar{ width:10px }
  .scrollBox::-webkit-scrollbar-thumb{
    background: rgba(255,255,255,.15);
    border-radius: 99px;
    border:2px solid rgba(0,0,0,.25);
  }

  .checks{margin-top:10px; display:flex; flex-direction:column; gap:10px}
  .check{
    display:flex; gap:12px; align-items:flex-start;
    padding:12px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.05);
    cursor:pointer;
    transition: filter .15s ease, transform .08s ease;
  }
  .check:active{ transform: translateY(1px) }
  .check input{ margin-top:2px; width:18px; height:18px }
  .check b{display:block; font-size:13px}
  .check small{display:block; margin-top:3px; color:rgba(255,255,255,.62); font-family:var(--mono); font-size:11px}

  .cinema{ position:relative; overflow:hidden; }
  .cinema::before{
    content:"";
    position:absolute; inset:-2px;
    background:
      radial-gradient(620px 260px at 50% 18%, rgba(109,92,255,.22), transparent 65%),
      radial-gradient(520px 220px at 40% 88%, rgba(34,197,94,.14), transparent 70%);
    opacity:0;
    transition: opacity .9s ease;
    pointer-events:none;
  }
  .cinema.on::before{opacity:1}
  .reveal-line{
    opacity:0;
    transform: translateY(8px);
    filter: blur(2px);
    transition: opacity .7s ease, transform .7s ease, filter .7s ease;
  }
  .reveal-line.show{ opacity:1; transform:none; filter: blur(0); }

  .gallery{
    display:grid;
    grid-template-columns: repeat(2, 1fr);
    gap:10px;
    margin-top:12px;
  }
  .polaroid{
    border-radius:18px;
    border:1px solid rgba(255,255,255,.12);
    overflow:hidden;
    background: rgba(255,255,255,.06);
    transform: rotate(var(--rot, -1deg));
    box-shadow: 0 18px 50px rgba(0,0,0,.35);
  }
  .polaroid img{ width:100%; height:240px; object-fit:cover; display:block }
  .cap{
    padding:10px 12px;
    border-top:1px solid rgba(255,255,255,.10);
    font-family:var(--mono);
    font-size:11px;
    color: rgba(255,255,255,.78);
    background: rgba(0,0,0,.25);
  }

  .ytWrap{
    margin-top:12px;
    border-radius:18px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    display:none;
  }
  .ytWrap iframe{width:100%; height:240px; border:0; display:block}

  .hidden-note{
    margin-top:12px;
    font-family:var(--mono);
    font-size:11px;
    color: rgba(203,213,255,.90);
    opacity:0;
    transition: opacity 1s ease;
    cursor:pointer;
    user-select:none;
  }

  .modal{
    position:fixed; inset:0;
    display:none;
    place-items:center;
    padding:16px;
    background: rgba(0,0,0,.72);
    z-index:99;
  }
  .modal.show{display:grid}
  .pop{
    width:min(480px,100%);
    border-radius:18px;
    border:1px solid rgba(255,255,255,.16);
    background: rgba(10,10,14,.92);
    box-shadow: var(--shadow);
    overflow:hidden;
  }
  .pop header{
    border-bottom:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.04);
  }
  .pop .head{ padding:12px 14px 10px; }
  .pop .head b{display:block; font-size:13px}
  .pop .head span{display:block; margin-top:2px; font-family:var(--mono); font-size:11px; color: rgba(255,255,255,.62)}
  .pop main{padding:14px}
  .pop p{margin:0; color:rgba(255,255,255,.86); line-height:1.45}
  .shake{animation: shake .22s ease}
  @keyframes shake{
    0%,100%{transform:translateX(0)}
    25%{transform:translateX(-7px)}
    75%{transform:translateX(7px)}
  }

  footer{
    padding:10px 14px 14px;
    border-top:1px solid rgba(255,255,255,.12);
    background: rgba(0,0,0,.18);
    font-family:var(--mono);
    font-size:11px;
    color: rgba(255,255,255,.55);
    display:flex;
    justify-content:space-between;
    gap:10px;
  }
</style>
</head>

<body>
<div class="fx"></div>
<div class="toasts" id="toasts"></div>

<div class="app">
  <header>
    <div class="brand">
      <b>Verifica√ß√£o de Compatibilidade‚Ñ¢</b>
      <span id="sub">alvo: Loira ‚Ä¢ protocolo: sorriso</span>
    </div>
    <div class="pill">STATUS: <span id="st">IDLE</span></div>
  </header>

  <main>

    <!-- S1 -->
    <section class="screen active" id="s1">
      <div class="card">
        <div class="kicker">BOOT ‚Üí iniciar_experi√™ncia()</div>
        <h1>Oi, Loira üòå</h1>
        <p><b>Eu fiz de um jeito diferente‚Ä¶</b> porque tem coisas que eu n√£o queria dizer do jeito comum.</p>
        <p class="small">Prometo: n√£o √© interrogat√≥rio. √â s√≥ uma experi√™ncia r√°pida e bem feita.</p>

        <div class="btns">
          <button class="primary" id="btnStart">INICIAR</button>
          <button class="ghost" id="btnForbidden">bot√£o proibido</button>
        </div>

        <div class="progress"><div class="bar" id="p1"></div></div>
      </div>
    </section>

    <!-- S2 secret -->
    <section class="screen" id="s2">
      <div class="card">
        <div class="glow"></div>
        <div class="kicker">SECRET ‚Üí curiosidade_detectada()</div>
        <h2>Voc√™ clicou üòè</h2>
        <p>Ok. Aqui √© a √°rea que o sistema finge que n√£o existe. Escolhe uma op√ß√£o:</p>

        <div class="checks">
          <label class="check">
            <input type="radio" name="secret" value="rir" checked>
            <div><b>Quero rir um pouco</b><small>resposta r√°pida ‚Ä¢ zero julgamento</small></div>
          </label>
          <label class="check">
            <input type="radio" name="secret" value="verdade">
            <div><b>Quero uma verdade</b><small>sem drama ‚Ä¢ s√≥ uma coisa bonita</small></div>
          </label>
          <label class="check">
            <input type="radio" name="secret" value="surpresa">
            <div><b>Quero uma surpresa</b><small>n√≠vel: ‚Äúuai‚Ä¶‚Äù</small></div>
          </label>
        </div>

        <div class="btns">
          <button class="primary" id="btnSecretGo">CONTINUAR</button>
          <button class="ghost" data-back="s1">VOLTAR</button>
        </div>
      </div>
    </section>

    <!-- S3 form (pegadinhas) -->
    <section class="screen" id="s3">
      <div class="card">
        <div class="kicker">FORM ‚Üí dados_minimos()</div>
        <h2>Rapidinho‚Ä¶</h2>
        <p class="muted">S√≥ pra eu registrar oficialmente. (Prometo que vai valer a pena.)</p>

        <label>üë§ Nome <span>(obrigat√≥rio)</span></label>
        <input id="nome" placeholder="Digite seu nome‚Ä¶" autocomplete="off">

        <label>üí¨ Apelido <span>(opcional)</span></label>
        <input id="apelido" placeholder="Ex: Loira‚Ä¶" autocomplete="off">

        <label>‚ú® N√≠vel de beleza <span>(aceita: infinito)</span></label>
        <input id="beleza" placeholder="Digite: infinito" autocomplete="off">

        <div class="btns">
          <button class="primary" id="btnFormNext">CONTINUAR</button>
          <button class="ghost" data-back="s1">VOLTAR</button>
        </div>

        <p class="small">Dica: o sistema √© exigente com beleza. (E com sinceridade.)</p>
      </div>
    </section>

    <!-- S4 humor -->
    <section class="screen" id="s4">
      <div class="card">
        <div class="kicker">CHECK ‚Üí calibrar_humor()</div>
        <h2>Teste de humor (3 perguntas)</h2>

        <label>1) Hoje voc√™ t√° mais‚Ä¶</label>
        <select id="q1">
          <option value="leve">Leve</option>
          <option value="seria">S√©ria</option>
          <option value="cansada">Cansada</option>
          <option value="saudade">Com saudade üëÄ</option>
        </select>

        <label>2) Escolha um superpoder</label>
        <select id="q2">
          <option value="teletransporte">Teletransporte (pra encurtar dist√¢ncia)</option>
          <option value="parar_tempo">Parar o tempo (s√≥ pra conversar)</option>
          <option value="ler_mentes">Ler mentes (perigoso)</option>
          <option value="cura">Cura (pra cuidar de quem importa)</option>
        </select>

        <label>3) Voc√™ prefere uma coisa simples ou intensa?</label>
        <select id="q3">
          <option value="simples">Simples (mas de verdade)</option>
          <option value="intensa">Intensa (mas com calma)</option>
        </select>

        <div class="btns">
          <button class="primary" id="btnToScan">INICIAR SCANNER</button>
          <button class="ghost" data-back="s3">VOLTAR</button>
        </div>
      </div>
    </section>

    <!-- S5 scan -->
    <section class="screen" id="s5">
      <div class="card">
        <div class="kicker">SCAN ‚Üí detectar_importancia()</div>
        <h2>Escaneando‚Ä¶</h2>
        <p class="muted">Fica tranquila. √â s√≥ pra eu ter ‚Äúprovas‚Äù do que eu j√° sei.</p>

        <div class="terminal">
          <div class="scanline"></div>
          <div id="term"></div>
        </div>

        <div class="progress"><div class="bar" id="p2"></div></div>

        <div class="btns">
          <button class="primary" id="btnToCompat" disabled>CONTINUAR</button>
        </div>
      </div>
    </section>

    <!-- S6 compat -->
    <section class="screen" id="s6">
      <div class="card">
        <div class="glow"></div>
        <div class="kicker">REPORT ‚Üí calcular_compatibilidade()</div>
        <h2>Compatibilidade</h2>
        <div class="big" id="compat">100%</div>
        <p class="muted" id="compatHint">subindo‚Ä¶</p>

        <div class="btns">
          <button class="good" id="btnToDistance" disabled>AVAN√áAR</button>
          <button class="ghost" data-back="s5">VOLTAR</button>
        </div>
      </div>
    </section>

    <!-- S6A dist√¢ncia -->
    <section class="screen" id="s6a">
      <div class="card">
        <div class="glow"></div>
        <div class="kicker">RADAR ‚Üí distancia_detectada()</div>
        <h2>Mapa da dist√¢ncia</h2>
        <p class="muted">Pode estar longe no mapa‚Ä¶ mas perto de um jeito que o sistema n√£o mede.</p>

        <div class="terminal" style="min-height:120px">
          <div class="scanline"></div>
          <div id="distTerm"></div>
        </div>

        <div class="btns">
          <button class="primary" id="btnToTextLong">CONTINUAR</button>
          <button class="ghost" data-back="s6">VOLTAR</button>
        </div>
      </div>
    </section>

    <!-- S6B texto longo -->
    <section class="screen" id="s6b">
      <div class="card">
        <div class="kicker">NOTE ‚Üí o_que_eu_gosto_em_voc√™()</div>
        <h2>Eu gosto‚Ä¶</h2>
        <p class="muted">Essa parte √© calma. L√™ no seu tempo.</p>

        <div class="scrollBox">
          <p>Gosto quando a gente sai e, em algum momento, eu me pego te olhando e sorrindo sozinho, sem nem perceber. N√£o √© pelo lugar, nem pelo que est√° em volta. √â porque ali, naquele instante, eu sei que estou no melhor lugar do mundo. Quando √© eu e voc√™, tudo fica mais simples, mais leve, mais certo.</p>
          <p>Gosto quando a gente sai s√≥ n√≥s dois e conversa sobre tudo. Sem pressa, sem roteiro, sem fingir nada. A conversa vai indo, muda de assunto, volta, se perde e se encontra de novo. E eu gosto disso. Gosto de sentir que o tempo desacelera quando a gente est√° junto.</p>
          <p>Gosto muito quando voc√™ come√ßa a falar da sua vida. Da sua faculdade, das coisas que j√° viveu, das hist√≥rias que carrega. Tem um jeito seu de contar que prende minha aten√ß√£o inteira. Eu ficaria o dia todo te ouvindo, conversando, s√≥ ali, porque ouvir voc√™ √© f√°cil, √© bom. Gosto de ouvir a sua voz. Ela tem um jeito que acalma, que aproxima, que faz o momento parecer seguro.</p>
          <p>Gosto muito do seu sorriso. Do jeito que s√≥ voc√™ tem. Um sorriso que chega antes das palavras, que muda o clima, que deixa tudo melhor sem esfor√ßo. Gosto do seu jeito tamb√©m ‚Äî desse jeito que n√£o se explica, mas se sente. Da sua presen√ßa, que √© diferente de qualquer outra, que se imp√µe sem precisar de nada al√©m de existir.</p>
          <p>Gosto de estar perto de voc√™. Do seu abra√ßo, do toque que acontece naturalmente, sem ser for√ßado. Da proximidade que vai surgindo no meio da conversa, como se sempre tivesse sido assim. Gosto da calma que voc√™ passa, da aten√ß√£o, do cuidado nos detalhes pequenos, que s√£o os que mais ficam.</p>
          <p>Gosto de sentir que, quando estamos juntos, o momento √© nosso. Sem pressa pra ir embora, sem distra√ß√£o, sem metade da aten√ß√£o em outro lugar. Gosto de poder ser eu ali, do jeito que sou, sem precisar provar nada.</p>
          <p>E talvez seja isso que eu mais gosto: a sensa√ß√£o de que estar com voc√™ n√£o exige esfor√ßo. √â s√≥ estar. Conversar, ouvir, sorrir, compartilhar hist√≥rias e sil√™ncios. Como se o mundo diminu√≠sse s√≥ pra caber a gente ali, simples, verdadeiro e do jeito certo.</p>
        </div>

        <div class="btns">
          <button class="primary" id="btnToChoices2">CONTINUAR</button>
          <button class="ghost" data-back="s6a">VOLTAR</button>
        </div>
      </div>
    </section>

    <!-- S7 choices -->
    <section class="screen" id="s7">
      <div class="card">
        <div class="kicker">CHOICE ‚Üí personalizar_surpresa()</div>
        <h2>Escolhe uma(s) op√ß√£o(√µes)</h2>
        <p class="muted">Marca o que voc√™ quiser. Cada escolha muda o que vem depois (de verdade).</p>

        <div class="checks">
          <label class="check"><input type="checkbox" id="c1"><div><b>Uma verdade</b><small>sem press√£o ‚Ä¢ sem exagero</small></div></label>
          <label class="check"><input type="checkbox" id="c2"><div><b>Um momento</b><small>tipo ‚Äúpausar o mundo‚Äù</small></div></label>
          <label class="check"><input type="checkbox" id="c3"><div><b>Uma coisa que eu quase nunca digo</b><small>carinho disfar√ßado ‚Ä¢ risco: sorriso</small></div></label>
        </div>

        <div class="btns">
          <button class="primary" id="btnBuildSurprise">REVELAR</button>
          <button class="ghost" data-back="s6b">VOLTAR</button>
        </div>
      </div>
    </section>

    <!-- S8 -->
    <section class="screen" id="s8">
      <div class="card">
        <div class="kicker">SURPRISE ‚Üí gerar_resposta()</div>
        <h2 id="s8title">Surpresa</h2>
        <p id="s8text" class="muted"></p>

        <div class="btns">
          <button class="primary" id="btnInsideSurprise">MAIS UMA‚Ä¶</button>
          <button class="ghost" data-back="s7">VOLTAR</button>
        </div>
      </div>
    </section>

    <!-- S9 -->
    <section class="screen" id="s9">
      <div class="card">
        <div class="kicker">SURPRISE++ ‚Üí detalhe_escondido()</div>
        <h2>Ok‚Ä¶ √∫ltima camada üò∂‚Äçüå´Ô∏è</h2>
        <p class="muted" id="s9text"></p>

        <div class="btns">
          <button class="good" id="btnToFinal">IR PRO FINAL</button>
          <button class="ghost" data-back="s8">VOLTAR</button>
        </div>
      </div>
    </section>

    <!-- S10 final -->
    <section class="screen" id="s10">
      <div class="card cinema" id="cinema">
        <div class="kicker">FINAL ‚Üí dizer_o_que_importa()</div>
        <h2 id="finalTitle">Loira‚Ä¶</h2>

        <p class="reveal-line" id="L1"><b>Eu amo muito voc√™ e n√£o quero que voc√™ saia da minha vida nunca.</b></p>
        <p class="reveal-line" id="L2">Mesmo com a dist√¢ncia, voc√™ √© presen√ßa.</p>
        <p class="reveal-line" id="L3">Est√° nos meus pensamentos, no meu cuidado e no jeito que eu tor√ßo por voc√™.</p>
        <p class="reveal-line" id="L4">Se um dia voc√™ precisar conversar, respirar fundo ou simplesmente n√£o explicar nada, eu vou estar sempre aqui pra voc√™.</p>
        <p class="reveal-line" id="L5"><b>Conta comigo. Sempre.</b></p>

        <div class="btns">
          <button class="primary" id="btnPlay">‚ñ∂ TOCAR M√öSICA</button>
          <button class="ghost" id="btnShowPhotos">MOSTRAR FOTOS</button>
        </div>

        <div class="ytWrap" id="ytWrap">
          <iframe id="yt" src="" allow="autoplay; encrypted-media" allowfullscreen title="M√∫sica"></iframe>
        </div>

        <div class="gallery" id="gallery" style="display:none">
          <div class="polaroid" style="--rot:-2deg">
            <img src="./foto1.jpg" alt="Foto 1">
            <div class="cap">‚Äúesse olhar me pega f√°cil‚Äù</div>
          </div>

          <div class="polaroid" style="--rot:1.5deg">
            <img src="./foto2.jpg" alt="Foto 2">
            <div class="cap">‚Äúpoderosa sem esfor√ßo‚Äù</div>
          </div>

          <div class="polaroid" style="--rot:-1deg">
            <img src="./foto3.jpg" alt="Foto 3">
            <div class="cap">‚Äúparece cena de filme‚Äù</div>
          </div>

          <div class="polaroid" style="--rot:2deg">
            <img src="./foto4.jpg" alt="Foto 4">
            <div class="cap">‚Äúmeu ponto fraco: seu sorriso‚Äù</div>
          </div>

          <div class="polaroid" style="grid-column:1/-1; --rot:-.5deg">
            <img src="./foto5.jpg" alt="Foto 5">
            <div class="cap">‚ÄúA SUA BELEZA √â INTERESTELAR‚Äù</div>
          </div>
        </div>

        <div class="hidden-note" id="hiddenNote">nem tudo precisa ser dito de uma vez.</div>
      </div>
    </section>

  </main>

  <footer>
    <span>¬© Dev do Crush</span>
    <span id="state">state=IDLE</span>
  </footer>
</div>

<div class="modal" id="modal">
  <div class="pop" id="pop">
    <header>
      <div class="head">
        <b id="mTitle">Aviso</b>
        <span id="mCode">SYS-000</span>
      </div>
    </header>
    <main>
      <p id="mMsg"></p>
      <div class="btns" style="margin-top:12px">
        <button class="primary" id="mOk">OK</button>
      </div>
    </main>
  </div>
</div>

<script>
  // ‚úÖ M√∫sica via YouTube (funciona no GitHub Pages)
  const YT_ID = "wMne8UDPN7A";
  const $ = (id)=>document.getElementById(id);

  const screens = ["s1","s2","s3","s4","s5","s6","s6a","s6b","s7","s8","s9","s10"]
    .reduce((a,id)=>(a[id]=$(id),a),{});

  function go(id){
    Object.values(screens).forEach(s=>s.classList.remove("active"));
    screens[id].classList.add("active");
    window.scrollTo({top:0, behavior:"smooth"});
  }

  const setState = (v)=>{ $("st").textContent=v; $("state").textContent=`state=${v}`; };

  function toast(type, title, msg, ms=2200){
    const wrap = $("toasts");
    const el = document.createElement("div");
    el.className = `toast ${type}`;
    el.innerHTML = `<b>${title}</b><span>${msg}</span>`;
    wrap.appendChild(el);
    setTimeout(()=>{ el.style.opacity="0"; el.style.transform="translateY(8px)"; }, ms-240);
    setTimeout(()=>{ el.remove(); }, ms);
  }

  const modal = $("modal"), pop = $("pop"), mTitle=$("mTitle"), mCode=$("mCode"), mMsg=$("mMsg");
  function showModal(title, code, msg){
    mTitle.textContent = title;
    mCode.textContent = code;
    mMsg.innerHTML = msg;
    modal.classList.add("show");
    pop.classList.remove("shake");
    void pop.offsetWidth;
    pop.classList.add("shake");
  }
  function hideModal(){ modal.classList.remove("show"); }
  $("mOk").addEventListener("click", hideModal);
  modal.addEventListener("click", (e)=>{ if(e.target===modal) hideModal(); });

  document.querySelectorAll("[data-back]").forEach(b=>{
    b.addEventListener("click", ()=>go(b.getAttribute("data-back")));
  });

  const session = {
    nome:"",
    apelido:"Loira",
    beleza:"infinito",
    secret:"rir",
    choices:{c1:false,c2:false,c3:false}
  };

  function sleep(ms){ return new Promise(r=>setTimeout(r, ms)); }

  function buzz(pattern=[30]){
    if(navigator.vibrate) navigator.vibrate(pattern);
  }

  setState("IDLE");
  $("p1").style.width = "12%";

  $("btnStart").addEventListener("click", async ()=>{
    setState("BOOTING");
    $("p1").style.width="45%"; await sleep(140);
    $("p1").style.width="72%"; await sleep(140);
    $("p1").style.width="100%"; await sleep(120);
    toast("t-ok","Sistema pronto","iniciando protocolo: sorriso");
    buzz([20]);
    setState("FORM");
    go("s3");
  });

  $("btnForbidden").addEventListener("click", ()=>{
    setState("SECRET");
    toast("t-warn","Acesso alternativo","curiosidade detectada");
    buzz([15]);
    go("s2");
  });

  $("btnSecretGo").addEventListener("click", ()=>{
    const v = document.querySelector('input[name="secret"]:checked')?.value || "rir";
    session.secret = v;

    if(v==="rir"){
      toast("t-ok","Modo Riso","risco alto de sorriso involunt√°rio");
      showModal("Modo Riso", "SYS-201", "‚úÖ Resultado: <b>risco alto de sorriso</b>.<br><br>Obs: voc√™ melhora o dia‚Ä¶ sem esfor√ßo.");
    }else if(v==="verdade"){
      toast("t-ok","Verdade","ok‚Ä¶ sem drama");
      showModal("Verdade", "SYS-202", "Eu vou falar simples:<br><br><b>eu gosto de ter voc√™ por perto</b>.<br>Mesmo quando ‚Äúperto‚Äù √© de outro jeito.");
    }else{
      toast("t-warn","B√¥nus","final ficou mais fofo");
      showModal("Surpresa", "SYS-203", "‚ö†Ô∏è Curiosidade detectada.<br><br>Voc√™ desbloqueou um b√¥nus: <b>o sistema vai ficar mais fofo no final</b>.");
    }

    setState("FORM");
    go("s3");
  });

  function normalizeBeauty(raw){
    const v = (raw||"").trim().toLowerCase();
    if(v==="infinito" || v==="infinita") return "infinito";
    return null;
  }

  $("btnFormNext").addEventListener("click", ()=>{
    const nome = ($("nome").value||"").trim();
    const apelido = ($("apelido").value||"").trim();
    const beleza = ($("beleza").value||"").trim();

    if(!nome){
      toast("t-err","Campo obrigat√≥rio","o sistema precisa saber seu nome üòå");
      showModal("Entrada obrigat√≥ria", "SYS-101",
        "Campo <b>Nome</b> n√£o pode ficar vazio üòå<br><br>O sistema precisa saber quem ele vai elogiar com responsabilidade.");
      buzz([30,40,30]);
      return;
    }

    // Pegadinha: apelido igual ao nome
    if(apelido && apelido.toLowerCase() === nome.toLowerCase()){
      toast("t-warn","Pegadinha","apelido n√£o pode ser igual ao nome üòÑ");
      showModal("Pegadinha üòÑ", "SYS-104",
        "O sistema detectou que voc√™ tentou usar o <b>nome</b> como <b>apelido</b>‚Ä¶<br><br>N√£o vale üòå<br>Mas eu gostei da ousadia.");
      buzz([20,20,20]);
      return;
    }

    session.apelido = apelido || "Loira";
    session.nome = nome;

    const ok = normalizeBeauty(beleza);
    if(!ok){
      toast("t-warn","Corre√ß√£o autom√°tica","beleza ajustada para: infinito");
      showModal("ERRO CR√çTICO", "SYS-666",
        "Valor inv√°lido.<br><br>üîß Corre√ß√£o autom√°tica aplicada: <b>infinito</b>.<br>Motivo: o sistema n√£o aceita beleza baixa.");
      $("beleza").value="infinito";
      buzz([25,25,25]);
      return;
    }

    $("sub").textContent = `alvo: ${session.apelido} ‚Ä¢ protocolo: sorriso`;
    $("finalTitle").textContent = `${session.apelido}‚Ä¶`;

    toast("t-ok","Registro conclu√≠do",`bem-vinda, ${session.apelido}`);
    buzz([15]);

    setState("SCANNING");
    go("s4");
  });

  $("btnToScan").addEventListener("click", ()=>{
    setState("SCANNING");
    go("s5");
    runScan();
  });

  async function runScan(){
    $("term").textContent = "";
    $("p2").style.width="0%";
    $("btnToCompat").disabled = true;

    const lines = [
      {t:"[SYS] Iniciando scanner‚Ä¶", c:""},
      {t:`[DAT] Nome: ${session.nome}`, c:"ok"},
      {t:`[DAT] Apelido: ${session.apelido}`, c:"ok"},
      {t:`[DAT] Beleza: infinito (confirmado).`, c:"ok"},
      {t:"[CHK] Procurando defeitos‚Ä¶", c:""},
      {t:"[ERR] Nenhum defeito encontrado (0 resultados).", c:"err"},
      {t:"[OK ] Detectado: presen√ßa + sorriso + impacto.", c:"ok"},
      {t:"[OK ] Iniciando c√°lculo de compatibilidade‚Ä¶", c:"ok"}
    ];

    for(let i=0;i<lines.length;i++){
      const div = document.createElement("div");
      div.className = lines[i].c;
      div.textContent = lines[i].t;
      $("term").appendChild(div);
      $("p2").style.width = `${Math.min(100, (i+1)* (100/lines.length))}%`;
      if(i===5) buzz([12]);
      await sleep(320);
    }

    $("btnToCompat").disabled = false;
    toast("t-ok","Scanner finalizado","pronto para calcular");
  }

  $("btnToCompat").addEventListener("click", ()=>{
    setState("COMPAT");
    go("s6");
    runCompat();
  });

  async function runCompat(){
    $("btnToDistance").disabled = true;

    const el = $("compat");
    const hint = $("compatHint");
    el.textContent = "100%";
    hint.textContent = "subindo‚Ä¶";

    const seq = [100, 180, 260, 380, 520, 740, 980, 1300, 2100, 3800, 9999];
    for(const n of seq){
      el.textContent = `${n}%`;
      buzz([8]);
      await sleep(110);
    }

    el.textContent = "VALOR INFINITO";
    buzz([20,40,20]);
    await sleep(420);

    hint.innerHTML =
      `<span class="err">‚ö†Ô∏è ERRO DE C√ÅLCULO</span><br>` +
      `A nossa compatibilidade √© t√£o grande que nem o sistema √© capaz de calcular.`;

    toast("t-warn","Sistema sobrecarregado","compatibilidade fora do limite");
    $("btnToDistance").disabled = false;
  }

  $("btnToDistance").addEventListener("click", ()=>{
    setState("RADAR");
    go("s6a");
    runDistance();
  });

  async function runDistance(){
    const out = $("distTerm");
    out.textContent = "";
    const lines = [
      "[SYS] Carregando radar‚Ä¶",
      "[DAT] Dist√¢ncia f√≠sica: vari√°vel.",
      "[DAT] Presen√ßa: constante.",
      "[OK ] Mesmo de outra cidade‚Ä¶ voc√™ fica perto.",
      "[OK ] Protocolo ativado: cuidado."
    ];
    for(const line of lines){
      out.textContent += line + "\n";
      await sleep(260);
    }
    toast("t-ok","Radar conclu√≠do","vamos continuar üòå");
  }

  $("btnToTextLong").addEventListener("click", ()=>{
    setState("NOTE");
    go("s6b");
  });

  $("btnToChoices2").addEventListener("click", ()=>{
    setState("CHOICE");
    go("s7");
  });

  $("btnBuildSurprise").addEventListener("click", ()=>{
    session.choices.c1 = $("c1").checked;
    session.choices.c2 = $("c2").checked;
    session.choices.c3 = $("c3").checked;

    if(!session.choices.c1 && !session.choices.c2 && !session.choices.c3){
      toast("t-err","Escolha necess√°ria","marca pelo menos uma op√ß√£o");
      showModal("Escolha necess√°ria", "SYS-301", "Marca pelo menos <b>uma</b>‚Ä¶<br><br>Eu prometo que nenhuma op√ß√£o d√° problema (s√≥‚Ä¶ d√° sorriso).");
      buzz([25,25,25]);
      return;
    }

    toast("t-ok","Escolhas registradas","o final vai mudar com base nisso");
    buzz([18]);

    setState("SURPRISE");
    go("s8");
    renderSurprise();
  });

  function renderSurprise(){
    const {c1,c2,c3} = session.choices;
    let title = "Surpresa";
    let textParts = [];

    if(c1){
      title = "Uma verdade";
      textParts.push("Sem exagero: voc√™ √© algu√©m que faz diferen√ßa.");
      textParts.push("Tem gente que aparece‚Ä¶ e o dia muda de comportamento.");
    }
    if(c2){
      textParts.push("√Äs vezes eu queria pausar o mundo s√≥ pra te ouvir por mais tempo.");
      textParts.push("Mesmo de outra cidade, voc√™ tem um jeito de ficar perto.");
    }
    if(c3){
      textParts.push("Eu nem sempre falo, mas eu reparo.");
      textParts.push("E eu gosto do jeito que voc√™ existe.");
    }

    if(session.secret==="surpresa"){
      textParts.push("B√¥nus desbloqueado: isso aqui ficou mais fofo do que eu planejei.");
    }

    $("s8title").textContent = title;
    $("s8text").innerHTML = textParts.map(t=>`‚Ä¢ ${t}`).join("<br>");
  }

  $("btnInsideSurprise").addEventListener("click", ()=>{
    setState("SURPRISE++");
    go("s9");
    renderInsideSurprise();
  });

  function renderInsideSurprise(){
    const {c1,c2,c3} = session.choices;
    let msg = [];
    msg.push("Ok‚Ä¶ isso aqui √© a parte que eu n√£o colocaria em uma conversa comum.");
    msg.push("Ent√£o eu escondi dentro do sistema.");

    if(c1 && c3){
      msg.push("<br><b>Voc√™ √© importante pra mim de um jeito bem s√©rio.</b>");
      msg.push("E eu n√£o falo isso pra qualquer pessoa.");
    } else if(c2){
      msg.push("<br><b>Dist√¢ncia √© s√≥ geografia.</b>");
      msg.push("O que eu sinto n√£o depende de endere√ßo.");
    } else {
      msg.push("<br><b>Tem gente que chega e fica.</b>");
      msg.push("E eu gosto que voc√™ exista no meu mundo.");
    }

    $("s9text").innerHTML = msg.join("<br>");
  }

  $("btnToFinal").addEventListener("click", async ()=>{
    setState("FINAL");
    go("s10");
    await cinematicReveal();
  });

  async function cinematicReveal(){
    const cinema = $("cinema");
    cinema.classList.add("on");

    const lines = ["L1","L2","L3","L4","L5"].map(id=>$(id));
    lines.forEach(l=>l.classList.remove("show"));
    $("hiddenNote").style.opacity = 0;

    await sleep(180);
    for(const id of ["L1","L2","L3","L4","L5"]){
      $(id).classList.add("show");
      buzz([10]);
      await sleep(560);
    }
    toast("t-ok","Final entregue","l√™ no seu tempo");
  }

  $("btnPlay").addEventListener("click", ()=>{
    const wrap = $("ytWrap");
    const iframe = $("yt");
    wrap.style.display = "block";
    iframe.src = `https://www.youtube.com/embed/${YT_ID}?autoplay=1&playsinline=1&rel=0`;

    toast("t-ok","M√∫sica","tocando‚Ä¶");
    setTimeout(()=>{ $("hiddenNote").style.opacity = 1; }, 6500);
  });

  $("btnShowPhotos").addEventListener("click", ()=>{
    $("gallery").style.display = "grid";
    toast("t-ok","Mem√≥rias","carregadas");
  });

  // easter egg: clique no texto final escondido
  $("hiddenNote").addEventListener("click", ()=>{
    showModal("Cartada final", "SYS-LOVE",
      "Algumas pessoas n√£o chegam pra ocupar espa√ßo.<br>" +
      "Chegam pra fazer o lugar existir.<br><br>" +
      "<b>Voc√™ √© essa pessoa!.</b>");
    buzz([25,25,60]);
  });
</script>
</body>
</html>

